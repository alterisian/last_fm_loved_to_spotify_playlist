<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libspotify: Session handling</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Session handling</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsp__audioformat.html">sp_audioformat</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsp__session__callbacks.html">sp_session_callbacks</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsp__session__config.html">sp_session_config</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#ga63b2309874193750ec3395f6cae32899">SPOTIFY_API_VERSION</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#gabf77bb5a124d5a6ee9a12c86abbc0d34">sp_connectionstate</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group__session.html#ggabf77bb5a124d5a6ee9a12c86abbc0d34ae31e9958a98211ecff5ecbcf7041dfa5">SP_CONNECTION_STATE_LOGGED_OUT</a> =  0, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__session.html#ggabf77bb5a124d5a6ee9a12c86abbc0d34a88ae17b4168184e62e4c190c289c47c5">SP_CONNECTION_STATE_LOGGED_IN</a> =  1, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__session.html#ggabf77bb5a124d5a6ee9a12c86abbc0d34ad1a6eb721675af4613f823c091538a8c">SP_CONNECTION_STATE_DISCONNECTED</a> =  2, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__session.html#ggabf77bb5a124d5a6ee9a12c86abbc0d34a4ddf57518007eef86b06f496d7059484">SP_CONNECTION_STATE_UNDEFINED</a> =  3
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#ga087d21080010768316cfb55d938eb94d">sp_sampletype</a> { <a class="el" href="group__session.html#gga087d21080010768316cfb55d938eb94daa829b269d191cca95ecb02c2bc59da42">SP_SAMPLETYPE_INT16_NATIVE_ENDIAN</a> =  0
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#ga77ddd919314a7bb16140569af7a38fe2">sp_bitrate</a> </td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#gaa3d50584480c8a5b554ba5d1b8d09b8b">sp_session_init</a> (const <a class="el" href="structsp__session__config.html">sp_session_config</a> *config, <a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> **sess)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#ga14345108e2ec82bd2c4dc5271768db3e">sp_session_login</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session, const char *username, const char *password)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#gaed2dbaa1eebd6752f76613daad9158bc">sp_user</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#ga267bbcae24b6bb1fd56de56678a5f455">sp_session_user</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#gab7f08ca0939985b30ae2d1ed9db1d726">sp_session_logout</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__session.html#gabf77bb5a124d5a6ee9a12c86abbc0d34">sp_connectionstate</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#ga34a7c9527705ab7d23b742006d81ea35">sp_session_connectionstate</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#gabfb3f59b20ae0b225e154eb9095152b2">sp_session_userdata</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#ga019a640b351de2a1ffe040ed755013f4">sp_session_process_events</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session, int *next_timeout)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#gac73bf2c569a43d824439b557d5e4b293">sp_session_player_load</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session, <a class="el" href="group__types.html#ga47bbd2262f0c8b5d7147af7d62198e48">sp_track</a> *track)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#ga3430cd4f11541868d3f83eaa31aecf44">sp_session_player_seek</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session, int offset)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#gab66c5915967e4f90db945b118e620624">sp_session_player_play</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session, bool play)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#ga91f2b527a7b02d688b8ef8b24060f70a">sp_session_player_unload</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#ga45a2febbe167483e48dab8d606d462d7">sp_playlistcontainer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#ga319767f0b795f1c46a08390b587c5671">sp_session_playlistcontainer</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#ga1bcf54cbc117a20ab2c15e59eb3a8174">sp_playlist</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#ga02391c9e28cff0a602f7139542e0238f">sp_session_starred_create</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__session.html#ga2b1186b141f3bbcddb2dfcbe55118602">sp_session_preferred_bitrate</a> (<a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *session, <a class="el" href="group__session.html#ga77ddd919314a7bb16140569af7a38fe2">sp_bitrate</a> bitrate)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The concept of a session is fundamental for all communication with the Spotify ecosystem - it is the object responsible for communicating with the Spotify service. You will need to instantiate a session that then can be used to request artist information, perform searches etc. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga63b2309874193750ec3395f6cae32899"></a><!-- doxytag: member="api.h::SPOTIFY_API_VERSION" ref="ga63b2309874193750ec3395f6cae32899" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPOTIFY_API_VERSION&nbsp;&nbsp;&nbsp;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Current version of the application interface, that is, the API described by this file.</p>
<p>This value should be set in the <a class="el" href="structsp__session__config.html">sp_session_config</a> struct passed to <a class="el" href="group__session.html#gaa3d50584480c8a5b554ba5d1b8d09b8b">sp_session_init()</a>.</p>
<p>If an (upgraded) library is no longer compatible with this version the error <a class="el" href="group__error.html#ggafd27986ce4cd9eeaeca8adda83c9eb6ba17c588fa9648e3649185e595bdb88d6f" title="The library version targeted does not match the one you claim you support.">SP_ERROR_BAD_API_VERSION</a> will be returned from <a class="el" href="group__session.html#gaa3d50584480c8a5b554ba5d1b8d09b8b">sp_session_init()</a>. Future versions of the library will provide you with some kind of mechanism to request an updated version of the library. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="jukebox_8c-example.html#a26">jukebox.c</a>.</dd>
</dl>
</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga77ddd919314a7bb16140569af7a38fe2"></a><!-- doxytag: member="api.h::sp_bitrate" ref="ga77ddd919314a7bb16140569af7a38fe2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__session.html#ga77ddd919314a7bb16140569af7a38fe2">sp_bitrate</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bitrate definitions for music streaming </p>

</div>
</div>
<a class="anchor" id="gabf77bb5a124d5a6ee9a12c86abbc0d34"></a><!-- doxytag: member="api.h::sp_connectionstate" ref="gabf77bb5a124d5a6ee9a12c86abbc0d34" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__session.html#gabf77bb5a124d5a6ee9a12c86abbc0d34">sp_connectionstate</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Describes the current state of the connection </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggabf77bb5a124d5a6ee9a12c86abbc0d34ae31e9958a98211ecff5ecbcf7041dfa5"></a><!-- doxytag: member="SP_CONNECTION_STATE_LOGGED_OUT" ref="ggabf77bb5a124d5a6ee9a12c86abbc0d34ae31e9958a98211ecff5ecbcf7041dfa5" args="" -->SP_CONNECTION_STATE_LOGGED_OUT</em>&nbsp;</td><td>
<p>User not yet logged in. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabf77bb5a124d5a6ee9a12c86abbc0d34a88ae17b4168184e62e4c190c289c47c5"></a><!-- doxytag: member="SP_CONNECTION_STATE_LOGGED_IN" ref="ggabf77bb5a124d5a6ee9a12c86abbc0d34a88ae17b4168184e62e4c190c289c47c5" args="" -->SP_CONNECTION_STATE_LOGGED_IN</em>&nbsp;</td><td>
<p>Logged in against a Spotify access point. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabf77bb5a124d5a6ee9a12c86abbc0d34ad1a6eb721675af4613f823c091538a8c"></a><!-- doxytag: member="SP_CONNECTION_STATE_DISCONNECTED" ref="ggabf77bb5a124d5a6ee9a12c86abbc0d34ad1a6eb721675af4613f823c091538a8c" args="" -->SP_CONNECTION_STATE_DISCONNECTED</em>&nbsp;</td><td>
<p>Was logged in, but has now been disconnected. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabf77bb5a124d5a6ee9a12c86abbc0d34a4ddf57518007eef86b06f496d7059484"></a><!-- doxytag: member="SP_CONNECTION_STATE_UNDEFINED" ref="ggabf77bb5a124d5a6ee9a12c86abbc0d34a4ddf57518007eef86b06f496d7059484" args="" -->SP_CONNECTION_STATE_UNDEFINED</em>&nbsp;</td><td>
<p>The connection state is undefined. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<a class="anchor" id="ga087d21080010768316cfb55d938eb94d"></a><!-- doxytag: member="api.h::sp_sampletype" ref="ga087d21080010768316cfb55d938eb94d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__session.html#ga087d21080010768316cfb55d938eb94d">sp_sampletype</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sample type descriptor </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga087d21080010768316cfb55d938eb94daa829b269d191cca95ecb02c2bc59da42"></a><!-- doxytag: member="SP_SAMPLETYPE_INT16_NATIVE_ENDIAN" ref="gga087d21080010768316cfb55d938eb94daa829b269d191cca95ecb02c2bc59da42" args="" -->SP_SAMPLETYPE_INT16_NATIVE_ENDIAN</em>&nbsp;</td><td>
<p>16-bit signed integer samples </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga34a7c9527705ab7d23b742006d81ea35"></a><!-- doxytag: member="api.h::sp_session_connectionstate" ref="ga34a7c9527705ab7d23b742006d81ea35" args="(sp_session *session)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__session.html#gabf77bb5a124d5a6ee9a12c86abbc0d34">sp_connectionstate</a> sp_session_connectionstate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The connection state of the specified session.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Your session object</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The connection state - see the sp_connectionstate enum for possible values </dd></dl>

</div>
</div>
<a class="anchor" id="gaa3d50584480c8a5b554ba5d1b8d09b8b"></a><!-- doxytag: member="api.h::sp_session_init" ref="gaa3d50584480c8a5b554ba5d1b8d09b8b" args="(const sp_session_config *config, sp_session **sess)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a> sp_session_init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsp__session__config.html">sp_session_config</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> **&nbsp;</td>
          <td class="paramname"> <em>sess</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize a session. The session returned will be initialized, but you will need to log in before you can perform any other operation</p>
<p>In the future, this will be renamed to sp_session_create() and will have a corresponding sp_session_release() function.</p>
<p>Here is a snippet from <code>spshell.c:</code>  <div class="fragment"><pre class="fragment">    config.api_version = <a class="code" href="group__session.html#ga63b2309874193750ec3395f6cae32899">SPOTIFY_API_VERSION</a>;

    <span class="comment">// The path of the directory to store the cache. This must be specified.</span>
    <span class="comment">// Please read the documentation on preferred values.</span>
    config.cache_location = <span class="stringliteral">&quot;tmp&quot;</span>;

    <span class="comment">// The path of the directory to store the settings. </span>
    <span class="comment">// This must be specified.</span>
    <span class="comment">// Please read the documentation on preferred values.</span>
    config.settings_location = <span class="stringliteral">&quot;tmp&quot;</span>;

    <span class="comment">// The key of the application. They are generated by Spotify,</span>
    <span class="comment">// and are specific to each application using libspotify.</span>
    config.application_key = g_appkey;
    config.application_key_size = g_appkey_size;

    <span class="comment">// This identifies the application using some</span>
    <span class="comment">// free-text string [1, 255] characters.</span>
    config.user_agent = <span class="stringliteral">&quot;spshell&quot;</span>;

    <span class="comment">// Register the callbacks.</span>
    config.callbacks = &amp;callbacks;

    error = <a class="code" href="group__session.html#gaa3d50584480c8a5b554ba5d1b8d09b8b">sp_session_init</a>(&amp;config, &amp;session);
    <span class="keywordflow">if</span> (<a class="code" href="group__error.html#ggafd27986ce4cd9eeaeca8adda83c9eb6ba16cb277dc84328e4b2c0cf6d5a0c0b8d" title="No errors encountered.">SP_ERROR_OK</a> != error) {
        fprintf(stderr, <span class="stringliteral">&quot;failed to create session: %s\n&quot;</span>,
                        <a class="code" href="group__error.html#ga983dee341d3c2008830513b7cffe7bf3">sp_error_message</a>(error));
        <span class="keywordflow">return</span> 2;
    }
</pre></div></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>config</em>&nbsp;</td><td>The configuration to use for the session </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>sess</em>&nbsp;</td><td>If successful, a new session - otherwise NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Error code <a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a> </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="jukebox_8c-example.html#a29">jukebox.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga14345108e2ec82bd2c4dc5271768db3e"></a><!-- doxytag: member="api.h::sp_session_login" ref="ga14345108e2ec82bd2c4dc5271768db3e" args="(sp_session *session, const char *username, const char *password)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a> sp_session_login </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>password</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Logs in the specified username/password combo. This initiates the download in the background. A callback is called when login is complete</p>
<p>Here is a snippet from <code>spshell.c:</code>  <div class="fragment"><pre class="fragment">    error = <a class="code" href="group__session.html#ga14345108e2ec82bd2c4dc5271768db3e">sp_session_login</a>(session, username, password);

    <span class="keywordflow">if</span> (<a class="code" href="group__error.html#ggafd27986ce4cd9eeaeca8adda83c9eb6ba16cb277dc84328e4b2c0cf6d5a0c0b8d" title="No errors encountered.">SP_ERROR_OK</a> != error) {
        fprintf(stderr, <span class="stringliteral">&quot;failed to login: %s\n&quot;</span>,
                        <a class="code" href="group__error.html#ga983dee341d3c2008830513b7cffe7bf3">sp_error_message</a>(error));
        <span class="keywordflow">return</span> 3;
    }
</pre></div></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Your session object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>username</em>&nbsp;</td><td>The username to log in </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>password</em>&nbsp;</td><td>The password for the specified username</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Result of the operation </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="jukebox_8c-example.html#a31">jukebox.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gab7f08ca0939985b30ae2d1ed9db1d726"></a><!-- doxytag: member="api.h::sp_session_logout" ref="gab7f08ca0939985b30ae2d1ed9db1d726" args="(sp_session *session)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a> sp_session_logout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Logs out the currently logged in user</p>
<p>Always call this before terminating the application and libspotify is currently logged in. Otherwise, the settings and cache may be lost.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Your session object</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Result of the operation </dd></dl>

</div>
</div>
<a class="anchor" id="gac73bf2c569a43d824439b557d5e4b293"></a><!-- doxytag: member="api.h::sp_session_player_load" ref="gac73bf2c569a43d824439b557d5e4b293" args="(sp_session *session, sp_track *track)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a> sp_session_player_load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__types.html#ga47bbd2262f0c8b5d7147af7d62198e48">sp_track</a> *&nbsp;</td>
          <td class="paramname"> <em>track</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loads the specified track</p>
<p>After successfully loading the track, you have the option of running <a class="el" href="group__session.html#gab66c5915967e4f90db945b118e620624">sp_session_player_play()</a> directly, or using <a class="el" href="group__session.html#ga3430cd4f11541868d3f83eaa31aecf44">sp_session_player_seek()</a> first. When this call returns, the track will have been loaded, unless an error occurred.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Your session object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>track</em>&nbsp;</td><td>The track to be loaded</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The result of the operation - see the <a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a> enum for possible values </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="jukebox_8c-example.html#a8">jukebox.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gab66c5915967e4f90db945b118e620624"></a><!-- doxytag: member="api.h::sp_session_player_play" ref="gab66c5915967e4f90db945b118e620624" args="(sp_session *session, bool play)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a> sp_session_player_play </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>play</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Play or pause the currently loaded track</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Your session object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>play</em>&nbsp;</td><td>If set to true, playback will occur. If set to false, the playback will be paused.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The result of the operation - see the <a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a> enum for possible values </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="jukebox_8c-example.html#a9">jukebox.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga3430cd4f11541868d3f83eaa31aecf44"></a><!-- doxytag: member="api.h::sp_session_player_seek" ref="ga3430cd4f11541868d3f83eaa31aecf44" args="(sp_session *session, int offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a> sp_session_player_seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Seek to position in the currently loaded track</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Your session object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>offset</em>&nbsp;</td><td>Track position, in milliseconds.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The result of the operation - see the <a class="el" href="group__error.html#gafd27986ce4cd9eeaeca8adda83c9eb6b">sp_error</a> enum for possible values </dd></dl>

</div>
</div>
<a class="anchor" id="ga91f2b527a7b02d688b8ef8b24060f70a"></a><!-- doxytag: member="api.h::sp_session_player_unload" ref="ga91f2b527a7b02d688b8ef8b24060f70a" args="(sp_session *session)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sp_session_player_unload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stops the currently playing track</p>
<p>This frees some resources held by libspotify to identify the currently playing track.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Your session object </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="jukebox_8c-example.html#a5">jukebox.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga319767f0b795f1c46a08390b587c5671"></a><!-- doxytag: member="api.h::sp_session_playlistcontainer" ref="ga319767f0b795f1c46a08390b587c5671" args="(sp_session *session)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__types.html#ga45a2febbe167483e48dab8d606d462d7">sp_playlistcontainer</a>* sp_session_playlistcontainer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the playlist container for the currently logged in user.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Your session object</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Playlist container object, NULL if not logged in </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="jukebox_8c-example.html#a16">jukebox.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga2b1186b141f3bbcddb2dfcbe55118602"></a><!-- doxytag: member="api.h::sp_session_preferred_bitrate" ref="ga2b1186b141f3bbcddb2dfcbe55118602" args="(sp_session *session, sp_bitrate bitrate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sp_session_preferred_bitrate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__session.html#ga77ddd919314a7bb16140569af7a38fe2">sp_bitrate</a>&nbsp;</td>
          <td class="paramname"> <em>bitrate</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set preferred bitrate for music streaming</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Session object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bitrate</em>&nbsp;</td><td>Preferred bitrate, see <a class="el" href="group__session.html#ga77ddd919314a7bb16140569af7a38fe2">sp_bitrate</a> for possible values </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga019a640b351de2a1ffe040ed755013f4"></a><!-- doxytag: member="api.h::sp_session_process_events" ref="ga019a640b351de2a1ffe040ed755013f4" args="(sp_session *session, int *next_timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sp_session_process_events </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>next_timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Make the specified session process any pending events</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Your session object </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>next_timeout</em>&nbsp;</td><td>Stores the time (in milliseconds) until you should call this function again </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="jukebox_8c-example.html#a32">jukebox.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga02391c9e28cff0a602f7139542e0238f"></a><!-- doxytag: member="api.h::sp_session_starred_create" ref="ga02391c9e28cff0a602f7139542e0238f" args="(sp_session *session)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__types.html#ga1bcf54cbc117a20ab2c15e59eb3a8174">sp_playlist</a>* sp_session_starred_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the starred list for currently logged in user</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Session object</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A playlist. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>You need to release the playlist when you are done with it. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__playlist.html#gad614ee55fd6efd5e0ca63d22cca109fd">sp_playlist_release()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga267bbcae24b6bb1fd56de56678a5f455"></a><!-- doxytag: member="api.h::sp_session_user" ref="ga267bbcae24b6bb1fd56de56678a5f455" args="(sp_session *session)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__types.html#gaed2dbaa1eebd6752f76613daad9158bc">sp_user</a>* sp_session_user </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Fetches the currently logged in user</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Your session object</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The logged in user (or NULL if not logged in) </dd></dl>

</div>
</div>
<a class="anchor" id="gabfb3f59b20ae0b225e154eb9095152b2"></a><!-- doxytag: member="api.h::sp_session_userdata" ref="gabfb3f59b20ae0b225e154eb9095152b2" args="(sp_session *session)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* sp_session_userdata </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__types.html#ga70dd19c6f824cf6a159575aa4c128b53">sp_session</a> *&nbsp;</td>
          <td class="paramname"> <em>session</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The userdata associated with the session</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>session</em>&nbsp;</td><td>Your session object</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The userdata that was passed in on session creation </dd></dl>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Fri Apr 23 14:33:53 2010.<br>
Copyright &copy; 2006&ndash;2010 Spotify Ltd</small></address>
</body>
</html>
